<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Formulare</title>
        <link
            rel="stylesheet"
            href="../../../HTML School/jwe23/vendor/css/bootstrap.css"
        />
    </head>
    <body>
        <div class="container mt-5">
            <h2>Bäckerei Bestellformular</h2>
            <form id="orderForm">
                <div class="row mb-3 align-items-center">
                    <label for="product1" class="col col-form-label"
                        >Produkt 1 (Brot - 3.50€):</label
                    >
                    <div class="col-sm-3">
                        <input
                            type="number"
                            id="product1"
                            class="form-control product"
                            price="3.50"
                            min="0"
                        />
                    </div>
                </div>
                <div class="row mb-3 align-items-center">
                    <label for="product2" class="col col-form-label"
                        >Produkt 2 (Kuchen - 4.50€):</label
                    >
                    <div class="col-sm-3">
                        <input
                            type="number"
                            id="product2"
                            class="form-control product"
                            price="4.50"
                            min="0"
                        />
                    </div>
                </div>
                <div class="row mb-3 align-items-center">
                    <label for="product3" class="col col-form-label"
                        >Produkt 3 (Donuts - 2.00€):</label
                    >
                    <div class="col-sm-3">
                        <input
                            type="number"
                            id="product3"
                            class="form-control product"
                            price="2.00"
                            min="0"
                        />
                    </div>
                </div>
                <div class="row mb-3">
                    <label for="total" class="col col-form-label"
                        >Gesamtsumme:</label
                    >
                    <div class="col-sm-3">
                        <input
                            type="text"
                            id="total"
                            class="form-control"
                            readonly
                        />
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col text-end">
                        <button type="submit" class="btn btn-primary">
                            Bestellen
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <script src="../../../HTML School/jwe23/vendor/js/bootstrap.js"></script>
        <script src="../../../HTML School/jwe23/vendor/jquery/jquery-3.7.1.min.js"></script>

        <script>
            let updateTotal = function () {
                let total = 0;

                $('.product').each(function () {
                    let price = parseFloat($(this).attr('price'));
                    // parseFloat turns '3.50' a string into a float number 3.5
                    let quantity = parseInt($(this).val());
                    // parseInt turns any float number in a integer full number from 1.9 to 1
                    if (!isNaN(quantity)) {
                        // es muss eine nummer sein um eine Berechnung durchführen zu können
                        total += price * quantity;
                    }
                });

                // ausgabe als 19.90 anstatt 19.9 (2 Nachkommastellen)
                $('#total').val(total.toFixed(2));
            };

            $('.product').on('input', function () {
                updateTotal();
            });
        </script>
    </body>
</html>
